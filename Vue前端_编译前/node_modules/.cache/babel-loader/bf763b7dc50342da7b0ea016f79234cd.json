{"ast":null,"code":"import { reactive, ref, toRefs } from \"vue/dist/vue\";\nimport { insertUserForUser } from \"../../../network/user\";\nexport default {\n  name: \"RegisterUser\",\n\n  setup() {\n    let insertSuccess = ref(false);\n    let insertFailed = ref(false);\n    let form = reactive({\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      phone: \"\",\n      area: \"\",\n      age: \"\"\n    });\n    let valid = true;\n    let nameRules = [v => !!v || 'Name is required', v => v && v.length <= 10 || 'Name must be less than 10 characters'];\n    let emailRules = [v => !!v || 'E-mail is required', v => /.+@.+\\..+/.test(v) || 'E-mail must be valid'];\n    let passwordRules = [v => !!v || 'E-mail is required'];\n    let phoneRules = [v => !!v || 'Name is required', v => v && v.length !== 11 || 'Name must be less than 10 characters'];\n\n    const validate = () => {\n      let formData = new window.FormData();\n      formData.append(\"name\", form.name);\n      formData.append(\"email\", form.email);\n      formData.append(\"password\", form.password);\n      formData.append(\"phone\", form.phone);\n      formData.append(\"area\", form.area);\n      formData.append(\"age\", form.age);\n      formData.append(\"avatar\", document.getElementById(\"input\").files[0]);\n      insertUserForUser(formData).then(res => {\n        let status = res.data.status;\n\n        if (status === 1) {\n          insertSuccess.value = true;\n          setTimeout(() => {\n            insertSuccess.value = false;\n          }, 1000);\n        } else {\n          insertFailed.value = true;\n          setTimeout(() => {\n            insertFailed.value = false;\n          }, 1000);\n        }\n\n        form.name = \"\";\n        form.email = \"\";\n        form.password = \"\";\n        form.phone = \"\";\n        form.area = \"\";\n        form.age = \"\";\n      });\n    };\n\n    return {\n      valid,\n      nameRules,\n      emailRules,\n      passwordRules,\n      phoneRules,\n      ...toRefs(form),\n      validate,\n      insertSuccess,\n      insertFailed\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["reactive","ref","toRefs","insertUserForUser","name","setup","insertSuccess","insertFailed","form","email","password","phone","area","age","valid","nameRules","v","length","emailRules","test","passwordRules","phoneRules","validate","formData","window","FormData","append","document","getElementById","files","then","res","status","data","value","setTimeout"],"sourceRoot":"","sources":["C:\\Users\\tpmp1\\Desktop\\vue-project\\minishop\\src\\views\\front\\RegisterUser.vue"],"sourcesContent":["<template>\r\n  <v-card style=\"height: 200px;\" color=\"#BF6211\">\r\n    <v-card-title class=\"text-h4 font-weight-black text-white mt-6 ml-4\">用户注册</v-card-title>\r\n    <v-card-subtitle class=\"text-h6 font-weight-black text-white mt-4 ml-4\">\r\n      请完成用户的注册\r\n    </v-card-subtitle>\r\n    <v-card-text>\r\n      <v-btn\r\n          color=\"#402c1a\"\r\n          class=\"font-weight-black text-white mt-2 ml-4\"\r\n          plain\r\n          @click=\"validate\"\r\n      >\r\n        <v-icon>mdi-account-plus</v-icon>\r\n        注册\r\n      </v-btn>\r\n    </v-card-text>\r\n  </v-card>\r\n  <v-card class=\"mt-6\">\r\n    <v-form\r\n        v-model=\"valid\"\r\n        lazy-validation\r\n        class=\"ma-6\"\r\n    >\r\n      <v-text-field\r\n          v-model=\"name\"\r\n          :counter=\"10\"\r\n          :rules=\"nameRules\"\r\n          label=\"Name\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"email\"\r\n          :rules=\"emailRules\"\r\n          label=\"E-mail\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"password\"\r\n          :rules=\"passwordRules\"\r\n          label=\"Password\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"phone\"\r\n          :rules=\"phoneRules\"\r\n          label=\"Phone\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"area\"\r\n          label=\"Area\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"age\"\r\n          label=\"Age\"\r\n          required\r\n      ></v-text-field>\r\n      <v-file-input\r\n          label=\"File input\"\r\n          filled\r\n          prepend-icon=\"mdi-camera\"\r\n          show-size\r\n          chips\r\n          id=\"input\"\r\n      ></v-file-input>\r\n    </v-form>\r\n  </v-card>\r\n  <v-snackbar v-model=\"insertSuccess\">增加成功</v-snackbar>\r\n  <v-snackbar v-model=\"insertFailed\">增加失败</v-snackbar>\r\n</template>\r\n\r\n<script>\r\nimport {reactive, ref, toRefs} from \"vue/dist/vue\";\r\nimport {insertUserForUser} from \"../../../network/user\";\r\n\r\nexport default {\r\n  name: \"RegisterUser\",\r\n  setup() {\r\n    let insertSuccess = ref(false);\r\n    let insertFailed = ref(false);\r\n\r\n    let form = reactive({\r\n      name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      phone: \"\",\r\n      area: \"\",\r\n      age: \"\",\r\n    })\r\n\r\n    let valid = true\r\n    let nameRules = [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length <= 10) || 'Name must be less than 10 characters',\r\n    ]\r\n    let emailRules = [\r\n      v => !!v || 'E-mail is required',\r\n      v => /.+@.+\\..+/.test(v) || 'E-mail must be valid',\r\n    ]\r\n    let passwordRules = [\r\n      v => !!v || 'E-mail is required',\r\n    ]\r\n    let phoneRules = [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length !== 11) || 'Name must be less than 10 characters',\r\n    ]\r\n    const validate = () => {\r\n      let formData = new window.FormData();\r\n      formData.append(\"name\", form.name);\r\n      formData.append(\"email\", form.email);\r\n      formData.append(\"password\", form.password);\r\n      formData.append(\"phone\", form.phone);\r\n      formData.append(\"area\", form.area)\r\n      formData.append(\"age\", form.age)\r\n      formData.append(\"avatar\", document.getElementById(\"input\").files[0]);\r\n      insertUserForUser(formData).then(res=>{\r\n        let status = res.data.status;\r\n        if (status === 1) {\r\n          insertSuccess.value = true;\r\n          setTimeout(()=>{\r\n            insertSuccess.value = false;\r\n          }, 1000)\r\n        } else {\r\n          insertFailed.value = true;\r\n          setTimeout(()=>{\r\n            insertFailed.value = false;\r\n          }, 1000)\r\n        }\r\n        form.name = \"\"\r\n        form.email = \"\"\r\n        form.password = \"\"\r\n        form.phone = \"\"\r\n        form.area = \"\"\r\n        form.age = \"\"\r\n      })\r\n    }\r\n\r\n    return {\r\n      valid,\r\n      nameRules,\r\n      emailRules,\r\n      passwordRules,\r\n      phoneRules,\r\n      ...toRefs(form),\r\n      validate,\r\n      insertSuccess,\r\n      insertFailed,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}