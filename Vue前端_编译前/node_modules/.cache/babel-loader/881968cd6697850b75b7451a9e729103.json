{"ast":null,"code":"import { useRoute, useRouter } from \"vue-router\";\nimport { getGoodByIdFroUser, updateCountOfBroweringGood } from \"../../../network/good\";\nimport { onMounted, ref } from \"vue\";\nimport { userDealwithCart } from \"../../../network/cart\";\nexport default {\n  name: \"GoodDetail\",\n\n  setup() {\n    let browseTime = 0;\n    let clearTimeSet = null;\n    const route = useRoute();\n    const id = route.query.id;\n    let list = ref([]);\n    const form = {\n      good_id: \"\",\n      user_id: window.localStorage.getItem(\"UserId\"),\n      count: 1,\n      selected: 1\n    };\n\n    const init = () => {\n      getGoodByIdFroUser(id).then(res => {\n        list.value = res.data;\n        form.good_id = res.data.id; //console.log(list.value);\n      });\n      updateCountOfBroweringGood(id).then(res => {//console.log(res);\n      });\n    };\n\n    let setTime = () => {\n      clearTimeSet = setInterval(() => {}, 1000);\n    };\n\n    onMounted(() => {\n      init();\n    });\n\n    const validate = () => {\n      console.log(form);\n      userDealwithCart(form).then(res => {\n        console.log(res.data.status);\n      });\n    };\n\n    return {\n      id,\n      list,\n      validate\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAmDA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,YAAlC;AACA,SAAQC,kBAAR,EAA4BC,0BAA5B,QAA6D,uBAA7D;AACA,SAAQC,SAAR,EAAmBC,GAAnB,QAA6B,KAA7B;AACA,SAAQC,gBAAR,QAA+B,uBAA/B;AAEA,eAAe;AACbC,MAAI,EAAE,YADO;;AAEbC,OAAK,GAAG;AACN,QAAIC,UAAS,GAAI,CAAjB;AACA,QAAIC,YAAW,GAAI,IAAnB;AACA,UAAMC,KAAI,GAAIX,QAAQ,EAAtB;AACA,UAAMY,EAAC,GAAID,KAAK,CAACE,KAAN,CAAYD,EAAvB;AACA,QAAIE,IAAG,GAAIT,GAAG,CAAC,EAAD,CAAd;AACA,UAAMU,IAAG,GAAI;AACXC,aAAO,EAAE,EADE;AAEXC,aAAO,EAAEC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,CAFE;AAGXC,WAAK,EAAE,CAHI;AAIXC,cAAQ,EAAE;AAJC,KAAb;;AAMA,UAAMC,IAAG,GAAI,MAAM;AACjBrB,wBAAkB,CAACU,EAAD,CAAlB,CAAuBY,IAAvB,CAA4BC,GAAG,IAAE;AAC/BX,YAAI,CAACY,KAAL,GAAaD,GAAG,CAACE,IAAjB;AACAZ,YAAI,CAACC,OAAL,GAAeS,GAAG,CAACE,IAAJ,CAASf,EAAxB,CAF+B,CAG/B;AACD,OAJD;AAKAT,gCAA0B,CAACS,EAAD,CAA1B,CAA+BY,IAA/B,CAAoCC,GAAG,IAAE,CACvC;AACD,OAFD;AAGF,KATA;;AAUA,QAAIG,OAAM,GAAI,MAAM;AAClBlB,kBAAW,GAAImB,WAAW,CAAC,MAAI,CAE9B,CAFyB,EAExB,IAFwB,CAA1B;AAGF,KAJA;;AAKAzB,aAAS,CAAC,MAAI;AACZmB,UAAI;AAEL,KAHQ,CAAT;;AAIA,UAAMO,QAAO,GAAI,MAAM;AACrBC,aAAO,CAACC,GAAR,CAAYjB,IAAZ;AACAT,sBAAgB,CAACS,IAAD,CAAhB,CAAuBS,IAAvB,CAA4BC,GAAG,IAAE;AAC/BM,eAAO,CAACC,GAAR,CAAYP,GAAG,CAACE,IAAJ,CAASM,MAArB;AACD,OAFD;AAGF,KALA;;AAOA,WAAO;AACLrB,QADK;AAELE,UAFK;AAGLgB;AAHK,KAAP;AAKF;;AA7Ca,CAAf","names":["useRoute","useRouter","getGoodByIdFroUser","updateCountOfBroweringGood","onMounted","ref","userDealwithCart","name","setup","browseTime","clearTimeSet","route","id","query","list","form","good_id","user_id","window","localStorage","getItem","count","selected","init","then","res","value","data","setTime","setInterval","validate","console","log","status"],"sourceRoot":"","sources":["C:\\Users\\tpmp1\\Desktop\\vue-project\\minishop\\src\\views\\front\\GoodDetail.vue"],"sourcesContent":["<template>\r\n  <v-card style=\"height: 200px;\" color=\"#BF6211\">\r\n    <v-card-title class=\"text-h4 font-weight-black text-white mt-6 ml-4\">商品详情</v-card-title>\r\n    <v-card-subtitle class=\"text-h6 font-weight-black text-white mt-4 ml-4\">\r\n      要是合适就买下来吧\r\n    </v-card-subtitle>\r\n    <v-card-text>\r\n      <v-btn\r\n          color=\"#402c1a\"\r\n          class=\"font-weight-black text-white mt-2 ml-4\"\r\n          plain\r\n          @click=\"validate\"\r\n      >\r\n        <v-icon>mdi-account-plus</v-icon>\r\n        加入购物车\r\n      </v-btn>\r\n    </v-card-text>\r\n  </v-card>\r\n\r\n  <v-card class=\"mt-2\">\r\n    <div style=\"width: 30%; display: inline;\">\r\n      <v-avatar\r\n          class=\"ma-3\"\r\n          size=\"500\"\r\n          rounded=\"0\"\r\n      >\r\n        <v-img :src=\"'http://localhost:8081/queryGoodImg/'+id\"></v-img>\r\n      </v-avatar>\r\n    </div>\r\n    <div style=\"width: 70%; display: inline;\">\r\n      <v-card-title class=\"text-h4 font-weight-black mt-4\">\r\n            商品名称：{{ list.name }}\r\n      </v-card-title>\r\n      <v-card-text class=\"text-h5 font-weight-black\">\r\n        <p class=\"mt-6\">商品种类：{{ list.item }}</p>\r\n        <p class=\"mt-6\">商品简介：{{ list.intro }}</p>\r\n        <p class=\"mt-6\">商品价格：${{ list.price }}</p>\r\n        <p class=\"mt-6\">商品库存：{{ list.count }}</p>\r\n      </v-card-text>\r\n    </div>\r\n\r\n  </v-card>\r\n\r\n\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport {getGoodByIdFroUser, updateCountOfBroweringGood} from \"../../../network/good\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport {userDealwithCart} from \"../../../network/cart\";\r\n\r\nexport default {\r\n  name: \"GoodDetail\",\r\n  setup() {\r\n    let browseTime = 0;\r\n    let clearTimeSet = null;\r\n    const route = useRoute();\r\n    const id = route.query.id\r\n    let list = ref([])\r\n    const form = {\r\n      good_id: \"\",\r\n      user_id: window.localStorage.getItem(\"UserId\"),\r\n      count: 1,\r\n      selected: 1,\r\n    }\r\n    const init = () => {\r\n      getGoodByIdFroUser(id).then(res=>{\r\n        list.value = res.data\r\n        form.good_id = res.data.id\r\n        //console.log(list.value);\r\n      })\r\n      updateCountOfBroweringGood(id).then(res=>{\r\n        //console.log(res);\r\n      })\r\n    }\r\n    let setTime = () => {\r\n      clearTimeSet = setInterval(()=>{\r\n        \r\n      },1000)\r\n    }\r\n    onMounted(()=>{\r\n      init()\r\n\r\n    })\r\n    const validate = () => {\r\n      console.log(form);\r\n      userDealwithCart(form).then(res=>{\r\n        console.log(res.data.status);\r\n      })\r\n    }\r\n\r\n    return {\r\n      id,\r\n      list,\r\n      validate,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}