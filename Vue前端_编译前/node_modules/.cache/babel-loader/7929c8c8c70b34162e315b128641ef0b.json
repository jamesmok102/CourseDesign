{"ast":null,"code":"import { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport { reactive, toRefs } from \"vue\";\nimport { salerLogin } from \"../../../../network/salerLogin\";\nimport { ref } from \"vue\";\nexport default {\n  name: \"salerLogin\",\n\n  setup() {\n    const router = useRouter();\n    const store = useStore();\n    let loginFailed = ref(false);\n    const userinfo = reactive({\n      name: '',\n      password: ''\n    });\n\n    const validate = () => {\n      salerLogin(userinfo).then(res => {\n        if (res.data.token != null) {\n          window.localStorage.setItem('JWT_Saler_Token', res.data.token);\n          store.commit('setSalerId', res.data.id);\n          store.commit('setSalerIsLogin', true);\n          router.push(\"/salermain\");\n        } else {\n          loginFailed.value = true;\n          setTimeout(() => {\n            loginFailed.value = false;\n          }, 1000);\n        }\n      });\n    };\n\n    return { ...toRefs(userinfo),\n      validate,\n      loginFailed\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAqEA,SAAQA,SAAR,QAAwB,YAAxB;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,SAAQC,QAAR,EAAkBC,MAAlB,QAA+B,KAA/B;AACA,SAAQC,UAAR,QAAyB,gCAAzB;AACA,SAAQC,GAAR,QAAkB,KAAlB;AAEA,eAAe;AACbC,MAAI,EAAE,YADO;;AAEbC,OAAK,GAAG;AAEN,UAAMC,MAAK,GAAIR,SAAS,EAAxB;AACA,UAAMS,KAAI,GAAIR,QAAQ,EAAtB;AACA,QAAIS,WAAU,GAAIL,GAAG,CAAC,KAAD,CAArB;AAEA,UAAMM,QAAO,GAAIT,QAAQ,CAAC;AACxBI,UAAI,EAAE,EADkB;AAExBM,cAAQ,EAAE;AAFc,KAAD,CAAzB;;AAKA,UAAMC,QAAO,GAAI,MAAM;AACrBT,gBAAU,CAACO,QAAD,CAAV,CAAqBG,IAArB,CAA0BC,GAAG,IAAE;AAC7B,YAAIA,GAAG,CAACC,IAAJ,CAASC,KAAT,IAAkB,IAAtB,EAA4B;AAC1BC,gBAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,iBAA5B,EAA+CL,GAAG,CAACC,IAAJ,CAASC,KAAxD;AACAR,eAAK,CAACY,MAAN,CAAa,YAAb,EAA2BN,GAAG,CAACC,IAAJ,CAASM,EAApC;AACAb,eAAK,CAACY,MAAN,CAAa,iBAAb,EAAgC,IAAhC;AACAb,gBAAM,CAACe,IAAP,CAAY,YAAZ;AACF,SALA,MAKO;AACLb,qBAAW,CAACc,KAAZ,GAAoB,IAApB;AACAC,oBAAU,CAAC,MAAI;AACbf,uBAAW,CAACc,KAAZ,GAAoB,KAApB;AACD,WAFS,EAEP,IAFO,CAAV;AAGF;AAED,OAbD;AAcF,KAfA;;AAiBA,WAAO,EACL,GAAGrB,MAAM,CAACQ,QAAD,CADJ;AAELE,cAFK;AAGLH;AAHK,KAAP;AAKF;;AAnCa,CAAf","names":["useRouter","useStore","reactive","toRefs","salerLogin","ref","name","setup","router","store","loginFailed","userinfo","password","validate","then","res","data","token","window","localStorage","setItem","commit","id","push","value","setTimeout"],"sourceRoot":"","sources":["C:\\Users\\tpmp1\\Desktop\\vue-project\\minishop\\src\\views\\back\\saler\\salerLogin.vue"],"sourcesContent":["<template>\r\n  <v-app>\r\n\r\n    <v-app-bar app color=\"#6456BF\">\r\n      <v-app-bar-title class=\"text-white font-weight-black\">销售人员后台登入</v-app-bar-title>\r\n    </v-app-bar>\r\n\r\n\r\n\r\n    <v-main>\r\n      <v-container fluid>\r\n        <v-row class=\"justify-center align-center\" style=\"height: 95vh;\">\r\n          <v-card width=\"400\" class=\"\">\r\n            <!--            <v-img-->\r\n            <!--                height=\"200\"-->\r\n            <!--                src=\"https://cdn.pixabay.com/photo/2020/07/12/07/47/bee-5396362_1280.jpg\"-->\r\n            <!--                cover-->\r\n            <!--                class=\"text-white\"-->\r\n            <!--            >-->\r\n            <!--            </v-img>-->\r\n\r\n            <v-card-title class=\"font-weight-black mt-2\">销售人员登入</v-card-title>\r\n\r\n            <v-card-text>\r\n              <v-form\r\n                  ref=\"form\"\r\n                  v-model=\"valid\"\r\n                  lazy-validation\r\n              >\r\n                <v-text-field\r\n                    v-model=\"name\"\r\n                    label=\"用户名\"\r\n                    required\r\n                    class=\"font-weight-black\"\r\n                ></v-text-field>\r\n\r\n                <v-text-field\r\n                    v-model=\"password\"\r\n                    label=\"密码\"\r\n                    required\r\n                    type=\"password\"\r\n                    class=\"font-weight-black\"\r\n                ></v-text-field>\r\n\r\n                <v-btn\r\n                    color=\"#6456BF\"\r\n                    class=\"mr-4 font-weight-black text-white\"\r\n                    @click=\"validate\"\r\n                >\r\n                  登入\r\n                </v-btn>\r\n\r\n              </v-form>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-row>\r\n      </v-container>\r\n    </v-main>\r\n\r\n    <v-footer app>\r\n\r\n    </v-footer>\r\n\r\n    <v-snackbar v-model=\"loginFailed\">登录失败</v-snackbar>\r\n\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport {useRouter} from \"vue-router\";\r\nimport {useStore} from \"vuex\";\r\nimport {reactive, toRefs} from \"vue\";\r\nimport {salerLogin} from \"../../../../network/salerLogin\";\r\nimport {ref} from \"vue\";\r\n\r\nexport default {\r\n  name: \"salerLogin\",\r\n  setup() {\r\n\r\n    const router = useRouter();\r\n    const store = useStore();\r\n    let loginFailed = ref(false);\r\n\r\n    const userinfo = reactive({\r\n      name: '',\r\n      password: ''\r\n    })\r\n\r\n    const validate = () => {\r\n      salerLogin(userinfo).then(res=>{\r\n        if (res.data.token != null) {\r\n          window.localStorage.setItem('JWT_Saler_Token', res.data.token);\r\n          store.commit('setSalerId', res.data.id);\r\n          store.commit('setSalerIsLogin', true);\r\n          router.push(\"/salermain\");\r\n        } else {\r\n          loginFailed.value = true;\r\n          setTimeout(()=>{\r\n            loginFailed.value = false;\r\n          }, 1000)\r\n        }\r\n\r\n      })\r\n    }\r\n\r\n    return {\r\n      ...toRefs(userinfo),\r\n      validate,\r\n      loginFailed,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}