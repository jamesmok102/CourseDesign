{"ast":null,"code":"import { onMounted, ref, watch } from \"vue\";\nimport { deleteSalersById, getSalers, betchDeleteSalersById } from \"../../../../network/saler\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: \"adminManageSalers\",\n\n  setup() {\n    let router = useRouter();\n    let page = ref(1);\n    let desserts = ref([]);\n    let pageLength = ref(1);\n    let pageSize = ref(1);\n    let pageTotal = ref(1);\n    let selected = ref([]);\n    let fullSelected = ref(false);\n    let deleteSuccess = ref(false);\n    let deleteFailed = ref(false);\n    onMounted(() => {\n      init();\n    });\n\n    const init = () => {\n      getSalers(page.value).then(res => {\n        desserts.value = res.data.data;\n        pageLength.value = res.data.PageLength;\n        pageSize.value = res.data.PageSize;\n        pageTotal.value = res.data.PageTotal;\n      });\n    };\n\n    const changeFullSelect = () => {\n      if (fullSelected.value == true) {\n        selected.value = desserts.value.map(item => item.id);\n      } else {\n        selected.value = [];\n      }\n    };\n\n    watch(page, async (newPage, oldPage) => {\n      init();\n    });\n\n    const deleteSaler = id => {\n      deleteSalersById(id).then(res => {\n        let status = res.data.status;\n\n        if (status > 0) {\n          deleteSuccess.value = true;\n          setTimeout(() => {\n            deleteSuccess.value = false;\n          }, 1000);\n        } else {\n          deleteFailed.value = true;\n          setTimeout(() => {\n            deleteFailed.value = false;\n          }, 1000);\n        }\n\n        init();\n      });\n    };\n\n    const batchDeleteSaler = () => {\n      betchDeleteSalersById(selected.value).then(res => {\n        console.log(res);\n        let status = res.data.status;\n\n        if (status > 0) {\n          deleteSuccess.value = true;\n          setTimeout(() => {\n            deleteSuccess.value = false;\n          }, 1000);\n        } else {\n          deleteFailed.value = true;\n          setTimeout(() => {\n            deleteFailed.value = false;\n          }, 1000);\n        }\n\n        init();\n      });\n    };\n\n    const editSaler = id => {\n      router.push({\n        path: \"admineditSalers\",\n        query: {\n          id: id\n        }\n      });\n    };\n\n    const checkSaler = id => {\n      router.push({\n        path: \"admincheckorderdetail\",\n        query: {\n          id: id\n        }\n      });\n    };\n\n    return {\n      desserts,\n      page,\n      pageLength,\n      selected,\n      changeFullSelect,\n      fullSelected,\n      pageSize,\n      deleteSuccess,\n      deleteFailed,\n      deleteSaler,\n      batchDeleteSaler,\n      editSaler,\n      checkSaler\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["onMounted","ref","watch","deleteSalersById","getSalers","betchDeleteSalersById","useRouter","name","setup","router","page","desserts","pageLength","pageSize","pageTotal","selected","fullSelected","deleteSuccess","deleteFailed","init","value","then","res","data","PageLength","PageSize","PageTotal","changeFullSelect","map","item","id","newPage","oldPage","deleteSaler","status","setTimeout","batchDeleteSaler","console","log","editSaler","push","path","query","checkSaler"],"sourceRoot":"","sources":["C:\\Users\\tpmp1\\Desktop\\vue-project\\minishop\\src\\views\\back\\admin\\adminManageSalers.vue"],"sourcesContent":["<template>\r\n  <v-card style=\"height: 200px;\" color=\"#1F8A70\">\r\n    <v-card-title class=\"text-h4 font-weight-black text-white mt-6 ml-4\">销售人员查询</v-card-title>\r\n    <v-card-subtitle class=\"text-h6 font-weight-black text-white mt-4 ml-4\">\r\n      在此可以查询销售人员的ID、姓名、电子邮箱、手机号码等信息，同时管理员也可以对销售人员的信息进行编辑和删除操作\r\n    </v-card-subtitle>\r\n    <v-card-text>\r\n      <v-btn\r\n          color=\"#004358\"\r\n          class=\"font-weight-black text-white mt-2 ml-4\"\r\n          plain\r\n          @click=\"batchDeleteSaler\"\r\n      >\r\n        <v-icon>mdi-file-remove</v-icon>\r\n        批量删除\r\n      </v-btn>\r\n    </v-card-text>\r\n  </v-card>\r\n  <v-card class=\"mt-6\">\r\n  <v-table>\r\n    <template v-slot:default>\r\n      <thead style=\"background-color: #1F8A70\">\r\n      <tr>\r\n        <th class=\"text-left text-subtitle-1 font-weight-black text-white\">\r\n          <v-checkbox hide-details @change=\"changeFullSelect\" v-model=\"fullSelected\"></v-checkbox>\r\n        </th>\r\n        <th class=\"text-left text-subtitle-1 font-weight-black text-white\">\r\n          姓名\r\n        </th>\r\n        <th class=\"text-left text-subtitle-1 font-weight-black text-white\">\r\n          电子邮箱\r\n        </th>\r\n        <th class=\"text-left text-subtitle-1 font-weight-black text-white\">\r\n          手机号码\r\n        </th>\r\n        <th class=\"text-left text-subtitle-1 font-weight-black text-white\">\r\n          操作\r\n        </th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr\r\n          v-for=\"item in desserts\"\r\n          :key=\"item.id\"\r\n      >\r\n        <td class=\"font-weight-medium\"><v-checkbox hide-details :value=\"item.id\" v-model=\"selected\"></v-checkbox></td>\r\n        <td class=\"font-weight-medium\">{{ item.name }}</td>\r\n        <td class=\"font-weight-medium\">{{item.email}}</td>\r\n        <td class=\"font-weight-medium\">{{item.phone}}</td>\r\n        <td>\r\n          <v-btn\r\n              color=\"#FD7400\"\r\n              class=\"font-weight-black text-white\"\r\n              plain\r\n              @click=\"checkSaler(item.id)\"\r\n          >\r\n            <v-icon>mdi-file-document-edit</v-icon>\r\n            业绩\r\n          </v-btn>\r\n          &nbsp\r\n          <v-btn\r\n              color=\"#FD7400\"\r\n              class=\"font-weight-black text-white\"\r\n              plain\r\n              @click=\"editSaler(item.id)\"\r\n          >\r\n            <v-icon>mdi-file-document-edit</v-icon>\r\n            编辑\r\n          </v-btn>\r\n          &nbsp\r\n          <v-btn\r\n              color=\"#FD7400\"\r\n              plain\r\n              class=\"font-weight-black text-white\"\r\n              @click=\"deleteSaler(item.id)\"\r\n          >\r\n            <v-icon>mdi-file-remove</v-icon>\r\n            删除\r\n          </v-btn>\r\n          \r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </template>\r\n  </v-table>\r\n  </v-card>\r\n  <div class=\"float-right mt-2\">\r\n    <v-pagination\r\n        v-model=\"page\"\r\n        :length=\"pageLength\"\r\n        total-visible=\"10\"\r\n        rounded=\"circle\"\r\n\r\n    ></v-pagination>\r\n  </div>\r\n  <v-snackbar v-model=\"deleteSuccess\">删除成功</v-snackbar>\r\n  <v-snackbar v-model=\"deleteFailed\">删除失败</v-snackbar>\r\n  \r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref, watch} from \"vue\";\r\nimport {deleteSalersById, getSalers, betchDeleteSalersById} from \"../../../../network/saler\";\r\nimport {useRouter} from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"adminManageSalers\",\r\n  setup() {\r\n    let router = useRouter();\r\n    let page = ref(1);\r\n    let desserts = ref([]);\r\n    let pageLength = ref(1);\r\n    let pageSize = ref(1);\r\n    let pageTotal = ref(1);\r\n    let selected = ref([]);\r\n    let fullSelected = ref(false);\r\n    let deleteSuccess = ref(false);\r\n    let deleteFailed = ref(false);\r\n\r\n    onMounted(()=>{\r\n      init()\r\n    })\r\n\r\n    const init = () => {\r\n      getSalers(page.value).then(res=>{\r\n        desserts.value = res.data.data;\r\n        pageLength.value = res.data.PageLength;\r\n        pageSize.value = res.data.PageSize;\r\n        pageTotal.value = res.data.PageTotal;\r\n      })\r\n    }\r\n\r\n    const changeFullSelect = () => {\r\n      if (fullSelected.value == true) {\r\n        selected.value = desserts.value.map(item=>item.id)\r\n      } else {\r\n        selected.value = [];\r\n      }\r\n    }\r\n\r\n    watch(page, async(newPage, oldPage) => {\r\n      init()\r\n    })\r\n\r\n    const deleteSaler = (id) => {\r\n      deleteSalersById(id).then(res=>{\r\n        let status = res.data.status;\r\n        if (status > 0) {\r\n          deleteSuccess.value = true;\r\n          setTimeout(()=>{\r\n            deleteSuccess.value = false;\r\n          }, 1000)\r\n        } else {\r\n          deleteFailed.value = true;\r\n          setTimeout(()=>{\r\n            deleteFailed.value = false;\r\n          }, 1000)\r\n        }\r\n        init()\r\n      })\r\n    }\r\n\r\n    const batchDeleteSaler = () => {\r\n      betchDeleteSalersById(selected.value).then(res=>{\r\n        console.log(res);\r\n        let status = res.data.status;\r\n        if (status > 0) {\r\n          deleteSuccess.value = true;\r\n          setTimeout(()=>{\r\n            deleteSuccess.value = false;\r\n          }, 1000)\r\n        } else {\r\n          deleteFailed.value = true;\r\n          setTimeout(()=>{\r\n            deleteFailed.value = false;\r\n          }, 1000)\r\n        }\r\n        init()\r\n      })\r\n    }\r\n\r\n    const editSaler = (id) => {\r\n      router.push({path: \"admineditSalers\", query: {id: id}})\r\n    }\r\n\r\n    const checkSaler = (id) => {\r\n      router.push({path: \"admincheckorderdetail\", query: {id: id}})\r\n    }\r\n\r\n    return {\r\n      desserts,\r\n      page,\r\n      pageLength,\r\n      selected,\r\n      changeFullSelect,\r\n      fullSelected,\r\n      pageSize,\r\n      deleteSuccess,\r\n      deleteFailed,\r\n      deleteSaler,\r\n      batchDeleteSaler,\r\n      editSaler,\r\n      checkSaler,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}