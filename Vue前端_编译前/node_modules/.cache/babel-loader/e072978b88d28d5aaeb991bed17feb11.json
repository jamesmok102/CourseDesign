{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"商品增加\");\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 在此可以增加商品信息\");\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 注意：想要增加商品图片，在增加商品后在编辑介面进行 \");\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"mdi-account-plus\");\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 增加商品 \");\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"增加成功\");\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"增加失败\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n\n  const _component_v_card_subtitle = _resolveComponent(\"v-card-subtitle\");\n\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n\n  const _component_v_card = _resolveComponent(\"v-card\");\n\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n\n  const _component_v_autocomplete = _resolveComponent(\"v-autocomplete\");\n\n  const _component_v_file_input = _resolveComponent(\"v-file-input\");\n\n  const _component_v_form = _resolveComponent(\"v-form\");\n\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_v_card, {\n    style: {\n      \"height\": \"200px\"\n    },\n    color: \"#4480A6\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_card_title, {\n      class: \"text-h4 font-weight-black text-white mt-6 ml-4\"\n    }, {\n      default: _withCtx(() => [_hoisted_1]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_v_card_subtitle, {\n      class: \"text-h6 font-weight-black text-white mt-4 ml-4\"\n    }, {\n      default: _withCtx(() => [_hoisted_2, _hoisted_3, _hoisted_4]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_v_card_text, null, {\n      default: _withCtx(() => [_createVNode(_component_v_btn, {\n        color: \"#263F73\",\n        class: \"font-weight-black text-white mt-2 ml-4\",\n        plain: \"\",\n        onClick: $setup.validate\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_icon, null, {\n          default: _withCtx(() => [_hoisted_5]),\n          _: 1\n          /* STABLE */\n\n        }), _hoisted_6]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }), _createVNode(_component_v_card, {\n    class: \"mt-6\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_form, {\n      modelValue: $setup.valid,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.valid = $event),\n      \"lazy-validation\": \"\",\n      class: \"ma-6\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_text_field, {\n        modelValue: _ctx.name,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.name = $event),\n        counter: 10,\n        rules: $setup.nameRules,\n        label: \"Name\",\n        required: \"\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\", \"rules\"]), _createVNode(_component_v_text_field, {\n        modelValue: _ctx.intro,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.intro = $event),\n        label: \"Intro\",\n        required: \"\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createVNode(_component_v_text_field, {\n        modelValue: _ctx.price,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.price = $event),\n        label: \"Price\",\n        required: \"\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createVNode(_component_v_text_field, {\n        modelValue: _ctx.count,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.count = $event),\n        label: \"Count\",\n        required: \"\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createVNode(_component_v_autocomplete, {\n        modelValue: _ctx.category,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.category = $event),\n        items: $setup.items,\n        dense: \"\",\n        filled: \"\",\n        label: \"Filled\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\", \"items\"]), _createVNode(_component_v_file_input, {\n        label: \"File input\",\n        filled: \"\",\n        \"prepend-icon\": \"mdi-camera\",\n        \"show-size\": \"\",\n        chips: \"\",\n        id: \"input\"\n      })]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"modelValue\"])]),\n    _: 1\n    /* STABLE */\n\n  }), _createVNode(_component_v_snackbar, {\n    modelValue: $setup.insertSuccess,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.insertSuccess = $event)\n  }, {\n    default: _withCtx(() => [_hoisted_7]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"]), _createVNode(_component_v_snackbar, {\n    modelValue: $setup.insertFailed,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.insertFailed = $event)\n  }, {\n    default: _withCtx(() => [_hoisted_8]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;iDAEyE;;iDACG;;gCAC5DA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;iDAAI;;iDAUJ;;iDAAyB;;iDAkDH;;iDACD;;;;;;;;;;;;;;;;;;;;;;;;;6DAhEnCC,aAiBSC,iBAjBT,EAiBS;AAjBDC,SAAsB,EAAtB;AAAA;AAAA,KAiBC;AAjBsBC,SAAK,EAAC;AAiB5B,GAjBT;sBACE,MAAwF,CAAxFH,aAAwFI,uBAAxF,EAAwF;AAA1EC,WAAK,EAAC;AAAoE,KAAxF,EAAoE;wBAAC,MAAI,aAAL;;;;AAAA,KAApE,CAAwF,EACxFL,aAGkBM,0BAHlB,EAGkB;AAHDD,WAAK,EAAC;AAGL,KAHlB,EAAuE;wBAAC,MAC5D,qCAD2D;;;;AAAA,KAAvE,CADwF,EAKxFL,aAUcO,sBAVd,EAUc,IAVd,EAUc;wBATZ,MAQQ,CARRP,aAQQQ,gBARR,EAQQ;AAPJL,aAAK,EAAC,SAOF;AANJE,aAAK,EAAC,wCAMF;AALJI,aAAK,EAAL,EAKI;AAJHC,eAAK,EAAEC;AAIJ,OARR;0BAME,MAAiC,CAAjCX,aAAiCY,iBAAjC,EAAiC,IAAjC,EAAiC;4BAAzB,MAAgB,aAAS;;;;AAAA,SAAjC,CAAiC;;;;OANnC;;AAAA,oBAQQ,EACI;;;;AAAA,KAVd,CALwF;;;;GAD1F,GAkBAZ,aA4CSC,iBA5CT,EA4CS;AA5CDI,SAAK,EAAC;AA4CL,GA5CT,EAAoB;sBAClB,MA0CS,CA1CTL,aA0CSa,iBA1CT,EA0CS;kBAzCIF,YAyCJ;iEAzCIA,eAAKG,OAyCT;AAxCL,2BAwCK;AAvCLT,WAAK,EAAC;AAuCD,KA1CT;wBAKE,MAMgB,CANhBL,aAMgBe,uBANhB,EAMgB;oBALHC,SAKG;mEALHA,YAAIF,OAKD;AAJXG,eAAO,EAAE,EAIE;AAHXC,aAAK,EAAEP,gBAGI;AAFZQ,aAAK,EAAC,MAEM;AADZC,gBAAQ,EAAR;AACY,OANhB;;AAAA,gCAMgB,EAChBpB,aAIgBe,uBAJhB,EAIgB;oBAHHC,UAGG;mEAHHA,aAAKF,OAGF;AAFZK,aAAK,EAAC,OAEM;AADZC,gBAAQ,EAAR;AACY,OAJhB;;AAAA,uBADgB,EAMhBpB,aAIgBe,uBAJhB,EAIgB;oBAHHC,UAGG;mEAHHA,aAAKF,OAGF;AAFZK,aAAK,EAAC,OAEM;AADZC,gBAAQ,EAAR;AACY,OAJhB;;AAAA,uBANgB,EAWhBpB,aAIgBe,uBAJhB,EAIgB;oBAHHC,UAGG;mEAHHA,aAAKF,OAGF;AAFZK,aAAK,EAAC,OAEM;AADZC,gBAAQ,EAAR;AACY,OAJhB;;AAAA,uBAXgB,EAgBhBpB,aAMkBqB,yBANlB,EAMkB;oBALLL,aAKK;mEALLA,gBAAQF,OAKH;AAJbQ,aAAK,EAAEX,YAIM;AAHdY,aAAK,EAAL,EAGc;AAFdC,cAAM,EAAN,EAEc;AADdL,aAAK,EAAC;AACQ,OANlB;;AAAA,gCAhBgB,EAuBhBnB,aAOgByB,uBAPhB,EAOgB;AANZN,aAAK,EAAC,YAMM;AALZK,cAAM,EAAN,EAKY;AAJZ,wBAAa,YAID;AAHZ,uBAGY;AAFZE,aAAK,EAAL,EAEY;AADZC,UAAE,EAAC;AACS,OAPhB,CAvBgB;;;;KAXlB;;AAAA,qBA0CS,EA3CS;;;;AAAA,GAApB,GA6CA3B,aAAqD4B,qBAArD,EAAqD;gBAAhCjB,oBAAgC;+DAAhCA,uBAAaG;AAAmB,GAArD;sBAAoC,MAAI;;;;GAAxC;;AAAA,qBACAd,aAAoD4B,qBAApD,EAAoD;gBAA/BjB,mBAA+B;+DAA/BA,sBAAYG;AAAmB,GAApD;sBAAmC,MAAI;;;;GAAvC;;AAAA","names":["_createElementVNode","_createVNode","_component_v_card","style","color","_component_v_card_title","class","_component_v_card_subtitle","_component_v_card_text","_component_v_btn","plain","onClick","$setup","_component_v_icon","_component_v_form","$event","_component_v_text_field","_ctx","counter","rules","label","required","_component_v_autocomplete","items","dense","filled","_component_v_file_input","chips","id","_component_v_snackbar"],"sourceRoot":"","sources":["C:\\Users\\tpmp1\\Desktop\\vue-project\\minishop\\src\\views\\back\\saler\\salerInsertGood.vue"],"sourcesContent":["<template>\r\n  <v-card style=\"height: 200px;\" color=\"#4480A6\">\r\n    <v-card-title class=\"text-h4 font-weight-black text-white mt-6 ml-4\">商品增加</v-card-title>\r\n    <v-card-subtitle class=\"text-h6 font-weight-black text-white mt-4 ml-4\">\r\n      在此可以增加商品信息<br>\r\n      注意：想要增加商品图片，在增加商品后在编辑介面进行\r\n    </v-card-subtitle>\r\n    <v-card-text>\r\n      <v-btn\r\n          color=\"#263F73\"\r\n          class=\"font-weight-black text-white mt-2 ml-4\"\r\n          plain\r\n          @click=\"validate\"\r\n      >\r\n        <v-icon>mdi-account-plus</v-icon>\r\n        增加商品\r\n      </v-btn>\r\n    </v-card-text>\r\n  </v-card>\r\n  <v-card class=\"mt-6\">\r\n    <v-form\r\n        v-model=\"valid\"\r\n        lazy-validation\r\n        class=\"ma-6\"\r\n    >\r\n      <v-text-field\r\n          v-model=\"name\"\r\n          :counter=\"10\"\r\n          :rules=\"nameRules\"\r\n          label=\"Name\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"intro\"\r\n          label=\"Intro\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"price\"\r\n          label=\"Price\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"count\"\r\n          label=\"Count\"\r\n          required\r\n      ></v-text-field>\r\n      <v-autocomplete\r\n          v-model=\"category\"\r\n          :items=\"items\"\r\n          dense\r\n          filled\r\n          label=\"Filled\"\r\n      ></v-autocomplete>\r\n      <v-file-input\r\n          label=\"File input\"\r\n          filled\r\n          prepend-icon=\"mdi-camera\"\r\n          show-size\r\n          chips\r\n          id=\"input\"\r\n      ></v-file-input>\r\n    </v-form>\r\n  </v-card>\r\n  <v-snackbar v-model=\"insertSuccess\">增加成功</v-snackbar>\r\n  <v-snackbar v-model=\"insertFailed\">增加失败</v-snackbar>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref, watch, toRefs, reactive} from \"vue\";\r\nimport { getCategoryNoPage } from \"../../../../network/category\"\r\nimport {insertGood} from \"../../../../network/good\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"salerInsertGood\",\r\n  setup() {\r\n    let insertSuccess = ref(false);\r\n    let insertFailed = ref(false);\r\n    let items = ref([])\r\n    let form = reactive({\r\n      name: \"\",\r\n      category: \"\",\r\n      intro: \"\",\r\n      price: \"\",\r\n      count: \"\",\r\n    })\r\n\r\n    let valid = true\r\n    let nameRules = [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length <= 10) || 'Name must be less than 10 characters',\r\n    ]\r\n\r\n    let itemdict = {} //category的id和item相对应的dict\r\n\r\n    const init = () => {\r\n      getCategoryNoPage().then(res=>{\r\n        res.data.forEach((v, i)=>{\r\n          items.value.push(v.item)\r\n          itemdict[v.item] = v.id;\r\n        })\r\n      })\r\n    }\r\n\r\n    onMounted(()=>{\r\n      init();\r\n    })\r\n\r\n    const validate = () => {\r\n      // let sendForm = reactive({\r\n      //   name: form.name,\r\n      //   category_id: itemdict[form.category],\r\n      //   intro: form.intro,\r\n      // })\r\n      let formData = new window.FormData();\r\n      formData.append(\"name\", form.name);\r\n      formData.append(\"category_id\", itemdict[form.category]);\r\n      formData.append(\"intro\", form.intro);\r\n      formData.append(\"pic\", document.getElementById(\"input\").files[0])\r\n      formData.append(\"price\", form.price)\r\n      formData.append(\"count\", form.count)\r\n      formData.append(\"saler_id\", store.state.saler.id)\r\n      insertGood(formData).then(res=>{\r\n        let status = res.data.status;\r\n        if (status === 1) {\r\n          insertSuccess.value = true;\r\n          setTimeout(()=>{\r\n            insertSuccess.value = false;\r\n          }, 1000)\r\n        } else {\r\n          insertFailed.value = true;\r\n          setTimeout(()=>{\r\n            insertFailed.value = false;\r\n          }, 1000)\r\n        }\r\n        form.name = \"\"\r\n        form.category = \"\"\r\n        form.intro = \"\"\r\n      })\r\n    }\r\n    return {\r\n      insertSuccess,\r\n      insertFailed,\r\n      ...toRefs(form),\r\n      valid,\r\n      nameRules,\r\n      validate,\r\n      items\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}