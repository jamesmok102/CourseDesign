"use strict";(self["webpackChunkminishop"]=self["webpackChunkminishop"]||[]).push([[3741],{753:function(e,t,a){a.d(t,{DW:function(){return n},Kr:function(){return i},PO:function(){return d},Pk:function(){return s},Q2:function(){return u},R4:function(){return r},Zr:function(){return o}});var l=a(9496);function u(e){return(0,l.W)({url:`/admin/salers/${e}`,method:"get"})}function n(e){return(0,l.W)({url:`/admin/salers/${e}`,method:"delete"})}function d(e){return(0,l.W)({url:"/admin/salers/batchDelete",method:"delete",headers:{"content-type":"application/json"},data:JSON.stringify(e)})}function i(e){return(0,l.W)({url:"/admin/salers/insertSaler",method:"post",headers:{"content-type":"multipart/form-data"},data:e})}function r(e){return(0,l.W)({url:`/admin/saler_id/${e}`,method:"get"})}function o(e){return(0,l.W)({url:"/admin/updateSaler",method:"post",headers:{"content-type":"application/json"},data:JSON.stringify(e)})}function s(e){return(0,l.W)({url:"/admin/updateSalerImg",method:"post",headers:{"content-type":"multipart/form-data"},data:e})}},4122:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var l=a(6252),u=a(2139),n=a(4719),d=a(386),i=a(7695),r=a(7563),o=a(5911),s=a(7742),m=a(9357),p=a(7737),c=a(7074),f=a(2482),h=a(8677);const v=(0,l.Uk)("销售人员更新"),w=(0,l.Uk)(" 在此可以编辑销售人员的各种信息"),W=(0,l._)("br",null,null,-1),V=(0,l.Uk)(" 注意：上传图片后请刷新网页 "),b=(0,l.Uk)("mdi-account-plus"),k=(0,l.Uk)(" 更新成员 "),g=(0,l.Uk)("更新成功"),_=(0,l.Uk)("更新失败");function U(e,t,a,U,y,S){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d._,{style:{height:"200px"},color:"#1F8A70"},{default:(0,l.w5)((()=>[(0,l.Wm)(i.E,{class:"text-h4 font-weight-black text-white mt-6 ml-4"},{default:(0,l.w5)((()=>[v])),_:1}),(0,l.Wm)(r.Q,{class:"text-h6 font-weight-black text-white mt-4 ml-4"},{default:(0,l.w5)((()=>[w,W,V])),_:1}),(0,l.Wm)(o.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n.T,{color:"#004358",class:"font-weight-black text-white mt-2 ml-4",plain:"",onClick:U.validate},{default:(0,l.w5)((()=>[(0,l.Wm)(p.t,null,{default:(0,l.w5)((()=>[b])),_:1}),k])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.Wm)(d._,{class:"mt-6"},{default:(0,l.w5)((()=>[(0,l.Wm)(m.O,{modelValue:U.valid,"onUpdate:modelValue":t[4]||(t[4]=e=>U.valid=e),"lazy-validation":"",class:"ma-6"},{default:(0,l.w5)((()=>[(0,l.Wm)(h.h,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),counter:10,rules:U.nameRules,label:"Name",required:""},null,8,["modelValue","rules"]),(0,l.Wm)(h.h,{modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=t=>e.email=t),rules:U.emailRules,label:"E-mail",required:""},null,8,["modelValue","rules"]),(0,l.Wm)(h.h,{modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),rules:U.passwordRules,label:"Password",required:""},null,8,["modelValue","rules"]),(0,l.Wm)(h.h,{modelValue:e.phone,"onUpdate:modelValue":t[3]||(t[3]=t=>e.phone=t),rules:U.phoneRules,label:"Phone",required:""},null,8,["modelValue","rules"]),(0,l.Wm)(s.Z,{label:"File input",filled:"","prepend-icon":"mdi-camera","show-size":"",chips:"",id:"input"}),(0,l.Wm)(u.V,{size:"50px"},{default:(0,l.w5)((()=>[(0,l.Wm)(c.f,{alt:"Avatar",src:"http://1.12.253.71:8081/querySalerImg/"+e.id,id:"avatar"},null,8,["src"])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(f.v,{modelValue:U.updateSuccess,"onUpdate:modelValue":t[5]||(t[5]=e=>U.updateSuccess=e)},{default:(0,l.w5)((()=>[g])),_:1},8,["modelValue"]),(0,l.Wm)(f.v,{modelValue:U.updateFailed,"onUpdate:modelValue":t[6]||(t[6]=e=>U.updateFailed=e)},{default:(0,l.w5)((()=>[_])),_:1},8,["modelValue"])],64)}var y=a(2262),S=a(753),q=a(2119),R={name:"adminEditSaler",setup(){let e,t=(0,q.yj)(),a=(0,y.iH)(!1),u=(0,y.iH)(!1),n=(0,y.qj)({id:"",name:"",email:"",password:"",phone:""});n.id=t.query.id;let d=!0,i=[e=>!!e||"Name is required",e=>e&&e.length<=10||"Name must be less than 10 characters"],r=[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],o=[e=>!!e||"E-mail is required"],s=[e=>!!e||"Name is required",e=>e&&11!==e.length||"Name must be less than 10 characters"];const m=()=>{(0,S.Zr)(n).then((e=>{let t=e.data.status;if(t>=1){if(null==document.getElementById("input").files[0])return a.value=!0,void setTimeout((()=>{a.value=!1}),1e3);let e=new window.FormData;e.append("fileid",n.id),e.append("file",document.getElementById("input").files[0]),(0,S.Pk)(e).then((e=>{let t=e.data.status;1===t?(a.value=!0,setTimeout((()=>{a.value=!1}),1e3)):(u.value=!0,setTimeout((()=>{u.value=!1}),1e3))})),a.value=!0,setTimeout((()=>{a.value=!1}),1e3)}else u.value=!0,setTimeout((()=>{u.value=!1}),1e3);p()}))},p=()=>{(0,S.R4)(n.id).then((e=>{n.name=e.data.name,n.email=e.data.email,n.password=e.data.password,n.phone=e.data.phone})),e="http://localhost:8081/updateSalerImg/"+n.id};return(0,l.bv)((()=>{p()})),{valid:d,nameRules:i,emailRules:r,passwordRules:o,phoneRules:s,...(0,y.BK)(n),validate:m,updateSuccess:a,updateFailed:u,img:e}}},E=a(3744);const N=(0,E.Z)(R,[["render",U]]);var x=N},9357:function(e,t,a){a.d(t,{O:function(){return r}});var l=a(6252),u=a(9728),n=a(2262),d=a(6719),i=a(3099);const r=(0,d.a)({name:"VForm",props:{...(0,u.vC)()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:d}=t;const r=(0,u.Np)(e),o=(0,n.iH)();function s(e){e.preventDefault(),r.reset()}function m(e){e.preventDefault(),r.validate().then((t=>{let{valid:a}=t;a&&d("submit",e)}))}return(0,i.L)((()=>{var e;return(0,l.Wm)("form",{ref:o,class:"v-form",novalidate:!0,onReset:s,onSubmit:m},[null==(e=a.default)?void 0:e.call(a,r)])})),r}})}}]);
//# sourceMappingURL=3741.8ae5c62f.js.map