{"version":3,"file":"js/7206.db58b532.js","mappings":"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","sources":["webpack://minishop/./network/saler.js","webpack://minishop/./src/views/back/saler/salerEditGood.vue","webpack://minishop/./src/views/back/saler/salerEditGood.vue?23f8"],"sourcesContent":["import {request} from \"./request\";\r\n\r\nexport function getSalers(page) {\r\n    return request({\r\n        url:`/admin/salers/${page}`,\r\n        method:'get',\r\n    })\r\n}\r\n\r\nexport function deleteSalersById(id) {\r\n    return request({\r\n        url:`/admin/salers/${id}`,\r\n        method:'delete',\r\n    })\r\n}\r\n\r\nexport function betchDeleteSalersById(data) {\r\n    return request({\r\n        url:'/admin/salers/batchDelete',\r\n        method:'delete',\r\n        headers: {'content-type': 'application/json'},\r\n        data: JSON.stringify(data)\r\n    })\r\n}\r\n\r\nexport function insertSaler(data) {\r\n    return request({\r\n        url:'/admin/salers/insertSaler',\r\n        method:'post',\r\n        headers: {'content-type': 'multipart/form-data'},\r\n        data\r\n    })\r\n}\r\n\r\nexport function getSalerById(id) {\r\n    return request({\r\n        url:`/admin/saler_id/${id}`,\r\n        method:'get',\r\n    })\r\n}\r\n\r\nexport function getSalerById_forSaler(id) {\r\n    return request({\r\n        url:`/saler/saler_id/${id}`,\r\n        method:'get',\r\n    })\r\n}\r\n\r\nexport function updateSaler(data) {\r\n    return request({\r\n        url:'/admin/updateSaler',\r\n        method:'post',\r\n        headers: {'content-type': 'application/json'},\r\n        data: JSON.stringify(data)\r\n    })\r\n}\r\n\r\nexport function uploadSalerImg(data) {\r\n    return request({\r\n        url:'/admin/updateSalerImg',\r\n        method:'post',\r\n        headers: {'content-type': 'multipart/form-data'},\r\n        data\r\n    })\r\n}\r\n\r\n\r\n\r\n","<template>\r\n  <v-card style=\"height: 200px;\" color=\"#4480A6\">\r\n    <v-card-title class=\"text-h4 font-weight-black text-white mt-6 ml-4\">商品更新</v-card-title>\r\n    <v-card-subtitle class=\"text-h6 font-weight-black text-white mt-4 ml-4\">\r\n      在此可以增加商品信息<br>\r\n      注意：想要增加商品图片，在增加商品后在编辑介面进行\r\n    </v-card-subtitle>\r\n    <v-card-text>\r\n      <v-btn\r\n          color=\"#263F73\"\r\n          class=\"font-weight-black text-white mt-2 ml-4\"\r\n          plain\r\n          @click=\"validate\"\r\n      >\r\n        <v-icon>mdi-account-plus</v-icon>\r\n        更新商品\r\n      </v-btn>\r\n<!--      <v-btn-->\r\n<!--          color=\"#263F73\"-->\r\n<!--          class=\"font-weight-black text-white mt-2 ml-4\"-->\r\n<!--          plain-->\r\n<!--          @click=\"submitFiles\"-->\r\n<!--      >-->\r\n<!--        <v-icon>mdi-account-plus</v-icon>-->\r\n<!--        上传图片-->\r\n<!--      </v-btn>-->\r\n    </v-card-text>\r\n  </v-card>\r\n  <v-card class=\"mt-6\">\r\n    <v-form\r\n        v-model=\"valid\"\r\n        lazy-validation\r\n        class=\"ma-6\"\r\n    >\r\n      <v-text-field\r\n          v-model=\"name\"\r\n          :counter=\"10\"\r\n          :rules=\"nameRules\"\r\n          label=\"Name\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"intro\"\r\n          label=\"intro\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"price\"\r\n          label=\"Price\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"count\"\r\n          label=\"Count\"\r\n          required\r\n      ></v-text-field>\r\n      <v-autocomplete\r\n          v-model=\"category\"\r\n          :items=\"items\"\r\n          dense\r\n          filled\r\n          label=\"Category\"\r\n      ></v-autocomplete>\r\n      <v-file-input\r\n          label=\"File input\"\r\n          filled\r\n          prepend-icon=\"mdi-camera\"\r\n          show-size\r\n          chips\r\n          id=\"input\"\r\n      ></v-file-input>\r\n      <v-avatar\r\n          size=\"50px\"\r\n      >\r\n        <v-img\r\n            alt=\"Avatar\"\r\n            :src=\"'http://1.12.253.71:8081/queryGoodImg/'+ id\"\r\n            id=\"avatar\"\r\n        ></v-img>\r\n      </v-avatar>\r\n    </v-form>\r\n\r\n\r\n  </v-card>\r\n  <v-snackbar v-model=\"updateSuccess\">更新成功</v-snackbar>\r\n  <v-snackbar v-model=\"updateFailed\">更新失败</v-snackbar>\r\n</template>\r\n\r\n<script>\r\nimport {useRoute} from \"vue-router\";\r\nimport {onMounted, reactive, ref, toRefs} from \"vue\";\r\nimport {getSalerById} from \"../../../../network/saler\";\r\nimport {getGoodById, updateGood, uploadGoodImg} from \"../../../../network/good\";\r\nimport {getCategoryNoPage} from \"../../../../network/category\";\r\n\r\nexport default {\r\n  name: \"salerEditGood\",\r\n  setup() {\r\n    let route = useRoute();\r\n    let updateSuccess = ref(false);\r\n    let updateFailed = ref(false);\r\n\r\n    let img;\r\n\r\n    let itemdict = {} //category的id和item相对应的dict\r\n\r\n    let form = reactive({\r\n      id: \"\",\r\n      name: \"\",\r\n      category: \"\",\r\n      intro: \"\",\r\n      count: \"\",\r\n      price: \"\",\r\n    })\r\n\r\n    form.id = route.query.id;\r\n\r\n    let items = ref([])\r\n\r\n    let valid = true\r\n    let nameRules = [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length <= 10) || 'Name must be less than 10 characters',\r\n    ]\r\n\r\n    const validate = () => {\r\n\r\n      let sendform = {\r\n        id: form.id,\r\n        name: form.name,\r\n        category_id: itemdict[form.category],\r\n        intro: form.intro,\r\n        count: form.count,\r\n        price: form.price,\r\n      }\r\n\r\n      console.log(sendform);\r\n\r\n      updateGood(sendform).then(res=>{\r\n        let status = res.data.status\r\n        if (status >= 1) {\r\n\r\n          if (document.getElementById(\"input\").files[0] == null) {\r\n            updateSuccess.value = true\r\n            setTimeout(()=>{\r\n              updateSuccess.value = false\r\n            },1000)\r\n            return\r\n          }\r\n\r\n          let formData = new window.FormData();\r\n          formData.append(\"fileid\", form.id)\r\n          formData.append(\"file\", document.getElementById(\"input\").files[0])\r\n          uploadGoodImg(formData).then(res=>{\r\n            let imgStatus = res.data.status;\r\n            if (imgStatus === 1) {\r\n              updateSuccess.value = true\r\n              setTimeout(()=>{\r\n                updateSuccess.value = false\r\n              },1000)\r\n            } else {\r\n              updateFailed.value = true\r\n              setTimeout(()=>{\r\n                updateFailed.value = false\r\n              },1000)\r\n            }\r\n          })\r\n\r\n        } else {\r\n          updateFailed.value = true\r\n          setTimeout(()=>{\r\n            updateFailed.value = false\r\n          },1000)\r\n        }\r\n        init()\r\n      })\r\n    }\r\n\r\n    const init = () => {\r\n\r\n      getGoodById(form.id).then(res=>{\r\n        form.name = res.data.name;\r\n        form.category = res.data.item;\r\n        form.intro = res.data.intro;\r\n        form.price = res.data.price;\r\n        form.count = res.data.count;\r\n      })\r\n\r\n      getCategoryNoPage().then(res=>{\r\n        res.data.forEach((v, i)=>{\r\n          items.value.push(v.item)\r\n          itemdict[v.item] = v.id;\r\n        })\r\n      })\r\n\r\n      img = \"http://localhost:8081/updateSalerImg/\" + form.id\r\n\r\n    }\r\n\r\n    onMounted(()=>{\r\n      init()\r\n    })\r\n\r\n    return {\r\n      valid,\r\n      nameRules,\r\n      ...toRefs(form),\r\n      validate,\r\n      updateSuccess,\r\n      updateFailed,\r\n      //submitFiles,\r\n      img,\r\n      items,\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./salerEditGood.vue?vue&type=template&id=3c963257\"\nimport script from \"./salerEditGood.vue?vue&type=script&lang=js\"\nexport * from \"./salerEditGood.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\tpmp1\\\\Desktop\\\\vue-project\\\\minishop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getSalers","page","request","url","method","deleteSalersById","id","betchDeleteSalersById","data","headers","JSON","stringify","insertSaler","getSalerById","updateSaler","uploadSalerImg","_createElementVNode","_createVNode","_component_v_card","style","color","_component_v_card_title","class","_component_v_card_subtitle","_component_v_card_text","_component_v_btn","plain","onClick","$setup","_component_v_icon","_component_v_form","$event","_component_v_text_field","_ctx","counter","rules","label","required","_component_v_autocomplete","items","dense","filled","_component_v_file_input","chips","_component_v_avatar","size","_component_v_img","alt","src","_component_v_snackbar","name","setup","img","route","useRoute","updateSuccess","ref","updateFailed","itemdict","form","reactive","category","intro","count","price","query","valid","nameRules","v","length","validate","sendform","category_id","console","log","updateGood","then","res","status","document","getElementById","files","value","setTimeout","formData","window","FormData","append","uploadGoodImg","imgStatus","init","getGoodById","item","getCategoryNoPage","forEach","i","push","onMounted","toRefs","__exports__","render"],"sourceRoot":""}