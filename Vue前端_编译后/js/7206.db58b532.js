"use strict";(self["webpackChunkminishop"]=self["webpackChunkminishop"]||[]).push([[7206],{753:function(e,t,a){a.d(t,{DW:function(){return u},Kr:function(){return i},PO:function(){return d},Pk:function(){return m},Q2:function(){return n},R4:function(){return o},Zr:function(){return r}});var l=a(9496);function n(e){return(0,l.W)({url:`/admin/salers/${e}`,method:"get"})}function u(e){return(0,l.W)({url:`/admin/salers/${e}`,method:"delete"})}function d(e){return(0,l.W)({url:"/admin/salers/batchDelete",method:"delete",headers:{"content-type":"application/json"},data:JSON.stringify(e)})}function i(e){return(0,l.W)({url:"/admin/salers/insertSaler",method:"post",headers:{"content-type":"multipart/form-data"},data:e})}function o(e){return(0,l.W)({url:`/admin/saler_id/${e}`,method:"get"})}function r(e){return(0,l.W)({url:"/admin/updateSaler",method:"post",headers:{"content-type":"application/json"},data:JSON.stringify(e)})}function m(e){return(0,l.W)({url:"/admin/updateSalerImg",method:"post",headers:{"content-type":"multipart/form-data"},data:e})}},7206:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var l=a(6252),n=a(3043),u=a(2139),d=a(4719),i=a(386),o=a(7695),r=a(7563),m=a(5911),c=a(7742),s=a(9357),p=a(7737),f=a(7074),h=a(2482),V=a(8677);const W=(0,l.Uk)("商品更新"),v=(0,l.Uk)(" 在此可以增加商品信息"),g=(0,l._)("br",null,null,-1),w=(0,l.Uk)(" 注意：想要增加商品图片，在增加商品后在编辑介面进行 "),y=(0,l.Uk)("mdi-account-plus"),k=(0,l.Uk)(" 更新商品 "),_=(0,l.Uk)("更新成功"),b=(0,l.Uk)("更新失败");function U(e,t,a,U,S,q){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i._,{style:{height:"200px"},color:"#4480A6"},{default:(0,l.w5)((()=>[(0,l.Wm)(o.E,{class:"text-h4 font-weight-black text-white mt-6 ml-4"},{default:(0,l.w5)((()=>[W])),_:1}),(0,l.Wm)(r.Q,{class:"text-h6 font-weight-black text-white mt-4 ml-4"},{default:(0,l.w5)((()=>[v,g,w])),_:1}),(0,l.Wm)(m.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d.T,{color:"#263F73",class:"font-weight-black text-white mt-2 ml-4",plain:"",onClick:U.validate},{default:(0,l.w5)((()=>[(0,l.Wm)(p.t,null,{default:(0,l.w5)((()=>[y])),_:1}),k])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.Wm)(i._,{class:"mt-6"},{default:(0,l.w5)((()=>[(0,l.Wm)(s.O,{modelValue:U.valid,"onUpdate:modelValue":t[5]||(t[5]=e=>U.valid=e),"lazy-validation":"",class:"ma-6"},{default:(0,l.w5)((()=>[(0,l.Wm)(V.h,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),counter:10,rules:U.nameRules,label:"Name",required:""},null,8,["modelValue","rules"]),(0,l.Wm)(V.h,{modelValue:e.intro,"onUpdate:modelValue":t[1]||(t[1]=t=>e.intro=t),label:"intro",required:""},null,8,["modelValue"]),(0,l.Wm)(V.h,{modelValue:e.price,"onUpdate:modelValue":t[2]||(t[2]=t=>e.price=t),label:"Price",required:""},null,8,["modelValue"]),(0,l.Wm)(V.h,{modelValue:e.count,"onUpdate:modelValue":t[3]||(t[3]=t=>e.count=t),label:"Count",required:""},null,8,["modelValue"]),(0,l.Wm)(n.f,{modelValue:e.category,"onUpdate:modelValue":t[4]||(t[4]=t=>e.category=t),items:U.items,dense:"",filled:"",label:"Category"},null,8,["modelValue","items"]),(0,l.Wm)(c.Z,{label:"File input",filled:"","prepend-icon":"mdi-camera","show-size":"",chips:"",id:"input"}),(0,l.Wm)(u.V,{size:"50px"},{default:(0,l.w5)((()=>[(0,l.Wm)(f.f,{alt:"Avatar",src:"http://1.12.253.71:8081/queryGoodImg/"+e.id,id:"avatar"},null,8,["src"])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(h.v,{modelValue:U.updateSuccess,"onUpdate:modelValue":t[6]||(t[6]=e=>U.updateSuccess=e)},{default:(0,l.w5)((()=>[_])),_:1},8,["modelValue"]),(0,l.Wm)(h.v,{modelValue:U.updateFailed,"onUpdate:modelValue":t[7]||(t[7]=e=>U.updateFailed=e)},{default:(0,l.w5)((()=>[b])),_:1},8,["modelValue"])],64)}var S=a(2119),q=a(2262),x=(a(753),a(248)),C=a(7309),F={name:"salerEditGood",setup(){let e,t=(0,S.yj)(),a=(0,q.iH)(!1),n=(0,q.iH)(!1),u={},d=(0,q.qj)({id:"",name:"",category:"",intro:"",count:"",price:""});d.id=t.query.id;let i=(0,q.iH)([]),o=!0,r=[e=>!!e||"Name is required",e=>e&&e.length<=10||"Name must be less than 10 characters"];const m=()=>{let e={id:d.id,name:d.name,category_id:u[d.category],intro:d.intro,count:d.count,price:d.price};console.log(e),(0,x.BK)(e).then((e=>{let t=e.data.status;if(t>=1){if(null==document.getElementById("input").files[0])return a.value=!0,void setTimeout((()=>{a.value=!1}),1e3);let e=new window.FormData;e.append("fileid",d.id),e.append("file",document.getElementById("input").files[0]),(0,x.Md)(e).then((e=>{let t=e.data.status;1===t?(a.value=!0,setTimeout((()=>{a.value=!1}),1e3)):(n.value=!0,setTimeout((()=>{n.value=!1}),1e3))}))}else n.value=!0,setTimeout((()=>{n.value=!1}),1e3);c()}))},c=()=>{(0,x.rd)(d.id).then((e=>{d.name=e.data.name,d.category=e.data.item,d.intro=e.data.intro,d.price=e.data.price,d.count=e.data.count})),(0,C.VP)().then((e=>{e.data.forEach(((e,t)=>{i.value.push(e.item),u[e.item]=e.id}))})),e="http://localhost:8081/updateSalerImg/"+d.id};return(0,l.bv)((()=>{c()})),{valid:o,nameRules:r,...(0,q.BK)(d),validate:m,updateSuccess:a,updateFailed:n,img:e,items:i}}},E=a(3744);const I=(0,E.Z)(F,[["render",U]]);var N=I}}]);
//# sourceMappingURL=7206.db58b532.js.map