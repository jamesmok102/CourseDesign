{"version":3,"file":"js/5477.375402b4.js","mappings":"ySAEyE,Q,WACG,e,GAC5DA,EAAAA,EAAAA,GAAI,mB,WAAA,+B,WAUJ,oB,WAAyB,U,WAkDH,Q,WACD,Q,8DAhEnCC,EAAAA,EAAAA,IAiBSC,EAAAA,EAAA,CAjBDC,MAAA,iBAAuBC,MAAM,WAArC,C,kBACE,IAAwF,EAAxFH,EAAAA,EAAAA,IAAwFI,EAAAA,EAAA,CAA1EC,MAAM,kDAAgD,C,kBAAC,IAAI,M,OACzEL,EAAAA,EAAAA,IAGkBM,EAAAA,EAAA,CAHDD,MAAM,kDAAgD,C,kBAAC,IAC5D,U,OAGZL,EAAAA,EAAAA,IAUcO,EAAAA,EAAA,M,kBATZ,IAQQ,EARRP,EAAAA,EAAAA,IAQQQ,EAAAA,EAAA,CAPJL,MAAM,UACNE,MAAM,yCACNI,MAAA,GACCC,QAAOC,EAAAA,UAJZ,C,kBAME,IAAiC,EAAjCX,EAAAA,EAAAA,IAAiCY,EAAAA,EAAA,M,kBAAzB,IAAgB,M,MAAS,K,KANnC,kB,gBAWJZ,EAAAA,EAAAA,IA4CSC,EAAAA,EAAA,CA5CDI,MAAM,QAAM,C,kBAClB,IA0CS,EA1CTL,EAAAA,EAAAA,IA0CSa,EAAAA,EAAA,C,WAzCIF,EAAAA,M,qCAAAA,EAAAA,MAAKG,GACd,qBACAT,MAAM,QAHV,C,kBAKE,IAMgB,EANhBL,EAAAA,EAAAA,IAMgBe,EAAAA,EAAA,C,WALHC,EAAAA,K,qCAAAA,EAAAA,KAAIF,GACZG,QAAS,GACTC,MAAOP,EAAAA,UACRQ,MAAM,OACNC,SAAA,IALJ,gCAOApB,EAAAA,EAAAA,IAIgBe,EAAAA,EAAA,C,WAHHC,EAAAA,M,qCAAAA,EAAAA,MAAKF,GACdK,MAAM,QACNC,SAAA,IAHJ,wBAKApB,EAAAA,EAAAA,IAIgBe,EAAAA,EAAA,C,WAHHC,EAAAA,M,qCAAAA,EAAAA,MAAKF,GACdK,MAAM,QACNC,SAAA,IAHJ,wBAKApB,EAAAA,EAAAA,IAIgBe,EAAAA,EAAA,C,WAHHC,EAAAA,M,qCAAAA,EAAAA,MAAKF,GACdK,MAAM,QACNC,SAAA,IAHJ,wBAKApB,EAAAA,EAAAA,IAMkBqB,EAAAA,EAAA,C,WALLL,EAAAA,S,qCAAAA,EAAAA,SAAQF,GAChBQ,MAAOX,EAAAA,MACRY,MAAA,GACAC,OAAA,GACAL,MAAM,UALV,gCAOAnB,EAAAA,EAAAA,IAOgByB,EAAAA,EAAA,CANZN,MAAM,aACNK,OAAA,GACA,eAAa,aACb,eACAE,MAAA,GACAC,GAAG,a,KAxCT,qB,OA4CF3B,EAAAA,EAAAA,IAAqD4B,EAAAA,EAAA,C,WAAhCjB,EAAAA,c,qCAAAA,EAAAA,cAAaG,IAAlC,C,kBAAoC,IAAI,M,KAAxC,mBACAd,EAAAA,EAAAA,IAAoD4B,EAAAA,EAAA,C,WAA/BjB,EAAAA,a,qCAAAA,EAAAA,aAAYG,IAAjC,C,kBAAmC,IAAI,M,KAAvC,uB,2CASF,GACEe,KAAM,kBACNC,QACE,IAAIC,GAAgBC,EAAAA,EAAAA,KAAI,GACpBC,GAAeD,EAAAA,EAAAA,KAAI,GACnBV,GAAQU,EAAAA,EAAAA,IAAI,IACZE,GAAOC,EAAAA,EAAAA,IAAS,CAClBN,KAAM,GACNO,SAAU,GACVC,MAAO,GACPC,MAAO,GACPC,MAAO,KAGLC,GAAQ,EACRC,EAAY,CACdC,KAAOA,GAAK,mBACZA,GAAMA,GAAKA,EAAEC,QAAU,IAAO,wCAG5BC,EAAW,GAEf,MAAMC,EAAO,MACXC,EAAAA,EAAAA,MAAoBC,MAAKC,IACvBA,EAAIC,KAAKC,SAAQ,CAACR,EAAGS,KACnB7B,EAAM8B,MAAMC,KAAKX,EAAEY,MACnBV,EAASF,EAAEY,MAAQZ,EAAEf,WAK3B4B,EAAAA,EAAAA,KAAU,KACRV,OAGF,MAAMW,EAAW,KAMf,IAAIC,EAAW,IAAIC,OAAOC,SAC1BF,EAASG,OAAO,OAAQ1B,EAAKL,MAC7B4B,EAASG,OAAO,cAAehB,EAASV,EAAKE,WAC7CqB,EAASG,OAAO,QAAS1B,EAAKG,OAC9BoB,EAASG,OAAO,MAAOC,SAASC,eAAe,SAASC,MAAM,IAC9DN,EAASG,OAAO,QAAS1B,EAAKI,OAC9BmB,EAASG,OAAO,QAAS1B,EAAKK,OAC9BkB,EAASG,OAAO,WAAYI,EAAAA,EAAAA,MAAAA,MAAAA,KAC5BC,EAAAA,EAAAA,IAAWR,GAAUV,MAAKC,IACxB,IAAIkB,EAASlB,EAAIC,KAAKiB,OACP,IAAXA,GACFnC,EAAcqB,OAAQ,EACtBe,YAAW,KACTpC,EAAcqB,OAAQ,IACrB,OAEHnB,EAAamB,OAAQ,EACrBe,YAAW,KACTlC,EAAamB,OAAQ,IACpB,MAELlB,EAAKL,KAAO,GACZK,EAAKE,SAAW,GAChBF,EAAKG,MAAQ,OAGjB,MAAO,CACLN,cAAAA,EACAE,aAAAA,MACGmC,EAAAA,EAAAA,IAAOlC,GACVM,MAAAA,EACAC,UAAAA,EACAe,SAAAA,EACAlC,MAAAA,K,UC/IN,MAAM+C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://minishop/./src/views/back/saler/salerInsertGood.vue","webpack://minishop/./src/views/back/saler/salerInsertGood.vue?ea2f"],"sourcesContent":["<template>\r\n  <v-card style=\"height: 200px;\" color=\"#4480A6\">\r\n    <v-card-title class=\"text-h4 font-weight-black text-white mt-6 ml-4\">商品增加</v-card-title>\r\n    <v-card-subtitle class=\"text-h6 font-weight-black text-white mt-4 ml-4\">\r\n      在此可以增加商品信息<br>\r\n      注意：想要增加商品图片，在增加商品后在编辑介面进行\r\n    </v-card-subtitle>\r\n    <v-card-text>\r\n      <v-btn\r\n          color=\"#263F73\"\r\n          class=\"font-weight-black text-white mt-2 ml-4\"\r\n          plain\r\n          @click=\"validate\"\r\n      >\r\n        <v-icon>mdi-account-plus</v-icon>\r\n        增加商品\r\n      </v-btn>\r\n    </v-card-text>\r\n  </v-card>\r\n  <v-card class=\"mt-6\">\r\n    <v-form\r\n        v-model=\"valid\"\r\n        lazy-validation\r\n        class=\"ma-6\"\r\n    >\r\n      <v-text-field\r\n          v-model=\"name\"\r\n          :counter=\"10\"\r\n          :rules=\"nameRules\"\r\n          label=\"Name\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"intro\"\r\n          label=\"Intro\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"price\"\r\n          label=\"Price\"\r\n          required\r\n      ></v-text-field>\r\n      <v-text-field\r\n          v-model=\"count\"\r\n          label=\"Count\"\r\n          required\r\n      ></v-text-field>\r\n      <v-autocomplete\r\n          v-model=\"category\"\r\n          :items=\"items\"\r\n          dense\r\n          filled\r\n          label=\"Filled\"\r\n      ></v-autocomplete>\r\n      <v-file-input\r\n          label=\"File input\"\r\n          filled\r\n          prepend-icon=\"mdi-camera\"\r\n          show-size\r\n          chips\r\n          id=\"input\"\r\n      ></v-file-input>\r\n    </v-form>\r\n  </v-card>\r\n  <v-snackbar v-model=\"insertSuccess\">增加成功</v-snackbar>\r\n  <v-snackbar v-model=\"insertFailed\">增加失败</v-snackbar>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref, watch, toRefs, reactive} from \"vue\";\r\nimport { getCategoryNoPage } from \"../../../../network/category\"\r\nimport {insertGood} from \"../../../../network/good\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"salerInsertGood\",\r\n  setup() {\r\n    let insertSuccess = ref(false);\r\n    let insertFailed = ref(false);\r\n    let items = ref([])\r\n    let form = reactive({\r\n      name: \"\",\r\n      category: \"\",\r\n      intro: \"\",\r\n      price: \"\",\r\n      count: \"\",\r\n    })\r\n\r\n    let valid = true\r\n    let nameRules = [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length <= 10) || 'Name must be less than 10 characters',\r\n    ]\r\n\r\n    let itemdict = {} //category的id和item相对应的dict\r\n\r\n    const init = () => {\r\n      getCategoryNoPage().then(res=>{\r\n        res.data.forEach((v, i)=>{\r\n          items.value.push(v.item)\r\n          itemdict[v.item] = v.id;\r\n        })\r\n      })\r\n    }\r\n\r\n    onMounted(()=>{\r\n      init();\r\n    })\r\n\r\n    const validate = () => {\r\n      // let sendForm = reactive({\r\n      //   name: form.name,\r\n      //   category_id: itemdict[form.category],\r\n      //   intro: form.intro,\r\n      // })\r\n      let formData = new window.FormData();\r\n      formData.append(\"name\", form.name);\r\n      formData.append(\"category_id\", itemdict[form.category]);\r\n      formData.append(\"intro\", form.intro);\r\n      formData.append(\"pic\", document.getElementById(\"input\").files[0])\r\n      formData.append(\"price\", form.price)\r\n      formData.append(\"count\", form.count)\r\n      formData.append(\"saler_id\", store.state.saler.id)\r\n      insertGood(formData).then(res=>{\r\n        let status = res.data.status;\r\n        if (status === 1) {\r\n          insertSuccess.value = true;\r\n          setTimeout(()=>{\r\n            insertSuccess.value = false;\r\n          }, 1000)\r\n        } else {\r\n          insertFailed.value = true;\r\n          setTimeout(()=>{\r\n            insertFailed.value = false;\r\n          }, 1000)\r\n        }\r\n        form.name = \"\"\r\n        form.category = \"\"\r\n        form.intro = \"\"\r\n      })\r\n    }\r\n    return {\r\n      insertSuccess,\r\n      insertFailed,\r\n      ...toRefs(form),\r\n      valid,\r\n      nameRules,\r\n      validate,\r\n      items\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./salerInsertGood.vue?vue&type=template&id=6e96bd40\"\nimport script from \"./salerInsertGood.vue?vue&type=script&lang=js\"\nexport * from \"./salerInsertGood.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\tpmp1\\\\Desktop\\\\vue-project\\\\minishop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","_createVNode","_component_v_card","style","color","_component_v_card_title","class","_component_v_card_subtitle","_component_v_card_text","_component_v_btn","plain","onClick","$setup","_component_v_icon","_component_v_form","$event","_component_v_text_field","_ctx","counter","rules","label","required","_component_v_autocomplete","items","dense","filled","_component_v_file_input","chips","id","_component_v_snackbar","name","setup","insertSuccess","ref","insertFailed","form","reactive","category","intro","price","count","valid","nameRules","v","length","itemdict","init","getCategoryNoPage","then","res","data","forEach","i","value","push","item","onMounted","validate","formData","window","FormData","append","document","getElementById","files","store","insertGood","status","setTimeout","toRefs","__exports__","render"],"sourceRoot":""}